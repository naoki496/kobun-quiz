<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ã‚«ãƒ¼ãƒ‰å›³é‘‘</title>
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
  <h1>ğŸ“– ã‚«ãƒ¼ãƒ‰å›³é‘‘</h1>

  <div class="panel">
    <div class="panel-inner">

      <div id="cardGrid" class="card-grid">
        <!-- JSã§ç”Ÿæˆ -->
      </div>

      <div style="margin-top:16px; text-align:center;">
        <a href="./index.html" class="pill" style="text-decoration:none;">
          â† ã‚¯ã‚¤ã‚ºã«æˆ»ã‚‹
        </a>
      </div>

    </div>
  </div>

<script>
/* ===== Card Poolï¼ˆapp.jsã¨ä¸€è‡´ã•ã›ã‚‹ï¼‰===== */
const CARD_POOL = {
  3: [{ id: "sei_shonagon", name: "æ¸…å°‘ç´è¨€", img: "./assets/cards/sei_shonagon.png" }],
  4: [{ id: "murasaki", name: "ç´«å¼éƒ¨", img: "./assets/cards/murasaki.png" }],
  5: [{ id: "basho", name: "æ¾å°¾èŠ­è•‰", img: "./assets/cards/basho.png" }],
};

const STORAGE_KEY_CARD_COUNTS = "kobunQuiz.v1.cardCounts";

/* ===== load counts ===== */
function loadCardCounts() {
  try {
    return JSON.parse(localStorage.getItem(STORAGE_KEY_CARD_COUNTS) || "{}");
  } catch {
    return {};
  }
}

/* ===== render ===== */
function renderCollection() {
  const grid = document.getElementById("cardGrid");
  const counts = loadCardCounts();

  const allCards = Object.values(CARD_POOL).flat();

  const obtained = allCards.filter(c => (counts[c.id] ?? 0) > 0);

  if (!obtained.length) {
    grid.innerHTML = `
      <div style="opacity:.75; padding:18px;">
        ã¾ã ã‚«ãƒ¼ãƒ‰ã‚’ç²å¾—ã—ã¦ã„ã¾ã›ã‚“ã€‚<br>
        â˜…3ä»¥ä¸Šã§10å•å®Œèµ°ã™ã‚‹ã¨ã‚«ãƒ¼ãƒ‰ãŒå‡ºã¾ã™ã€‚
      </div>
    `;
    return;
  }

  grid.innerHTML = obtained.map(card => {
    const n = counts[card.id] ?? 0;
    return `
      <div class="card-item">
        <img src="${card.img}" alt="${card.name}">
        <div class="card-item-name">${card.name}</div>
        <div class="card-item-count">æ‰€æŒï¼š${n}æš</div>
      </div>
    `;
  }).join("");
}

renderCollection();
</script>
</body>
</html>
