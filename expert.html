<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1,viewport-fit=cover" name="viewport"/>
<title>古文単語330 | EXPERT</title>
<link href="./styles.css" rel="stylesheet"/>
<link href="./expert.css" rel="stylesheet"/>
</head>
<body>
<div class="bg"></div>
<main class="wrap" id="app">
<header class="topbar">
<div class="brand">
<div class="mode"><div class="modeMain">古文単語330</div><div class="modeSub">EXPERT</div></div>
</div>
<div class="topActions">
<!-- ✅ BGM button: prominent -->

<div class="hud">
<div class="hudItem">
<div class="hudLabel">Q</div>
<div class="hudValue" id="hudQ">--/30</div>
</div>
<div class="hudItem">
<div class="hudLabel">正解</div>
<div class="hudValue" id="hudCorrect">0</div>
</div>
<div class="hudItem">
<div class="hudLabel">COMBO</div>
<div class="hudValue combo" id="hudCombo">0</div>
</div>
<div class="hudItem">
<div class="hudLabel">MAX</div>
<div class="hudValue" id="hudMaxCombo">0</div>
</div>
</div>
</div>
</header>
<section class="panel">
<div class="meterArea" id="meterArea"></div>
<div class="questionBox">
<div class="source" id="source"></div>
<div class="question" id="question">読み込み中…</div>
</div>
<div class="choices" id="choices"></div>
<div class="actions">
<button class="btn ghost" id="btnRetry" type="button">リトライ</button><button aria-pressed="true" class="btn ghost bgm-btn bgmBtn" id="btnBgm" title="BGM切替" type="button">
<span aria-hidden="true" class="bgmDot"></span>
<span class="bgmText">BGM: ON</span>
</button>
<a class="btn ghost" href="https://naoki496.github.io/kokugo-dojo/">戻る</a>
<div class="note" id="note">音：ON（STARTで再生開始）</div>
</div>
</section>
<!-- ✅ START modal -->
<section aria-modal="true" class="overlay" id="startOverlay" role="dialog">
<div class="overlayCard startCard" id="startCard">
<div class="startBody">
</div>
<!-- ===== EXPERT ENTRY GATE (enhanced) ===== -->
<section aria-label="EXPERT入場ゲート" class="gate" id="gate">
<div class="gateTop">
<div class="gateTitle">EXPERT ENTRY</div>
<div class="gateTag">挑戦契約</div>
</div>
<div aria-hidden="true" class="gateBadges">
<span class="badge b-hkp">HKP SPEND</span>
<span class="badge b-sound">SOUND ON</span>
<span class="badge b-hard">HARD MODE</span>
</div>
<div class="gatePills">
<div class="pill">消費 <b id="hkpCost">3</b> HKP</div>
<div class="pill">所持 <b id="hkpNow">0</b> HKP</div>
</div>
<div aria-live="polite" class="gateMsg" id="gateMsg"></div>
<div class="gateRules">
<div class="ruleItem">STARTで <b>即時にHKPを消費</b>（途中離脱でも返却されません）</div>
<div class="ruleItem">BGMが鳴ります（<b>音量注意</b>）</div>
<div class="ruleItem">成功条件：正解 <b>25+</b> ＆ MAX COMBO <b>5+
          </b></div>
</div></section>
<div class="startActions">
<button class="btn" id="btnStart" type="button">START</button>
</div>
</div>
</section>
<!-- RESULT overlay -->
<section class="overlay hidden" id="overlay">
<div class="overlayCard">
<div class="resultTitle" id="resultTitle">RESULT</div>
<div class="resultGrid">
<div class="resultStat">
<div class="k">正解</div><div class="v" id="rCorrect">0</div>
</div>
<div class="resultStat">
<div class="k">MAX COMBO</div><div class="v" id="rMaxCombo">0</div>
</div>
<div class="resultStat">
<div class="k">報酬</div><div class="v" id="rReward">-</div>
</div>
</div>
<div class="cardArea hidden" id="cardArea">
<div class="cardFrame" id="cardFrame">
<img alt="card" id="cardImg"/>
</div>
<div class="cardMeta">
<div class="cardName" id="cardName"></div>
<a class="cardWiki" id="cardWiki" rel="noopener" target="_blank">Wiki</a>
</div>
</div>
<div class="resultActions">
<button class="btn" id="btnAgain" type="button">もう一度（EXPERT）</button>
<a class="btn ghost" href="https://naoki496.github.io/kokugo-dojo/">TOPへ</a>
</div>
</div>
</section>
<section class="countdown hidden" id="countdown"></section>
</main>
<!-- ✅ 重要：順番は必ず csv.js → expert.js -->
<script src="./csv.js"></script>
<script src="./expert.js"></script>
</body>
</html>
