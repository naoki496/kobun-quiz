:root{
  --bg: #0f1116;
  --panel: #161a22;
  --panel2: #10131a;
  --text: #e9ecf1;
  --muted: #b7bfcc;
  --line: rgba(255,255,255,.12);

  --ok: #35d07f;
  --ng: #ff5b6b;
  --accent: #6aa5ff;

  --hl-bg: rgba(255, 220, 90, .18);
  --hl-border: rgba(255, 220, 90, .45);

  --radius: 16px;
}

*{ box-sizing: border-box; }

html, body{
  margin: 0;
  padding: 0;
  background: radial-gradient(1200px 600px at 50% -20%, rgba(106,165,255,.18), transparent 60%),
              radial-gradient(1000px 600px at 100% 0%, rgba(53,208,127,.12), transparent 55%),
              var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Sans", "Yu Gothic", sans-serif;
  line-height: 1.4;
}

h1{
  margin: 18px 16px 10px;
  font-size: 20px;
  font-weight: 800;
  letter-spacing: .02em;
}

#quiz{
  max-width: 720px;
  margin: 0 auto;
  padding: 14px;
}

#meta{
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 12px;
  display: grid;
  gap: 10px;
}

#progress, #score{
  font-weight: 700;
  font-size: 14px;
  color: var(--muted);
}

/* 進捗メーター */
#meterWrap{
  width: 100%;
  height: 10px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 999px;
  overflow: hidden;
}
#meterBar{
  width: 0%;
  height: 100%;
  background: linear-gradient(90deg, rgba(106,165,255,.95), rgba(53,208,127,.95));
  border-radius: 999px;
  transition: width 180ms ease-out;
}

#question{
  margin-top: 12px;
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 14px;
  font-size: 18px;
  font-weight: 800;
  letter-spacing: .01em;
  line-height: 1.55;
}

/* 【】ハイライト */
.hl{
  padding: 0 .25em;
  border-radius: 8px;
  background: var(--hl-bg);
  border: 1px solid var(--hl-border);
}

.choice{
  margin-top: 10px;
  width: 100%;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  color: var(--text);
  font-size: 18px;
  font-weight: 800;
  padding: 14px 12px;
  text-align: left;
  cursor: pointer;
  transition: transform 80ms ease-out, border-color 120ms ease-out, background 120ms ease-out;
}

.choice:active{
  transform: scale(.99);
}

.choice:disabled{
  opacity: .85;
  cursor: default;
}

/* 正誤の色味（読みやすさ優先：過度に派手にしない） */
.choice.correct{
  border-color: rgba(53,208,127,.65);
  background: linear-gradient(180deg, rgba(53,208,127,.16), rgba(255,255,255,.02));
}
.choice.wrong{
  border-color: rgba(255,91,107,.65);
  background: linear-gradient(180deg, rgba(255,91,107,.14), rgba(255,255,255,.02));
}

#status{
  margin-top: 10px;
  min-height: 28px;
  font-weight: 900;
  letter-spacing: .04em;
  color: var(--muted);
}

#controls{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-top: 10px;
}

.ctrl{
  border-radius: 14px;
  border: 1px solid var(--line);
  background: var(--panel2);
  color: var(--text);
  font-size: 16px;
  font-weight: 900;
  padding: 12px;
  cursor: pointer;
  transition: transform 80ms ease-out, border-color 120ms ease-out;
}
.ctrl:active{ transform: scale(.99); }
.ctrl:disabled{
  opacity: .5;
  cursor: default;
}

#hint{
  margin-top: 10px;
  color: rgba(233,236,241,.75);
  font-size: 12px;
}

/* ===== Feedback Animations ===== */
@keyframes pop {
  0%   { transform: translateY(0) scale(1); }
  35%  { transform: translateY(-1px) scale(1.03); }
  100% { transform: translateY(0) scale(1); }
}

@keyframes shake {
  0%   { transform: translateX(0); }
  20%  { transform: translateX(-6px); }
  40%  { transform: translateX(6px); }
  60%  { transform: translateX(-4px); }
  80%  { transform: translateX(4px); }
  100% { transform: translateX(0); }
}

@keyframes flashOk {
  0%   { box-shadow: 0 0 0 0 rgba(53,208,127,.0) inset; }
  30%  { box-shadow: 0 0 0 999px rgba(53,208,127,.07) inset; }
  100% { box-shadow: 0 0 0 0 rgba(53,208,127,.0) inset; }
}

@keyframes flashNg {
  0%   { box-shadow: 0 0 0 0 rgba(255,91,107,.0) inset; }
  30%  { box-shadow: 0 0 0 999px rgba(255,91,107,.07) inset; }
  100% { box-shadow: 0 0 0 0 rgba(255,91,107,.0) inset; }
}

/* ボタンの反応：正解/不正解で必ず動きが出る */
.choice.correct { animation: pop 220ms ease-out; }
.choice.wrong   { animation: shake 260ms ease-out; }

/* 画面全体の薄いフラッシュ */
#quiz.flash-ok { animation: flashOk 220ms ease-out; }
#quiz.flash-ng { animation: flashNg 220ms ease-out; }

/* 動きが苦手な人のための配慮 */
@media (prefers-reduced-motion: reduce){
  .choice.correct, .choice.wrong, #quiz.flash-ok, #quiz.flash-ng { animation: none !important; }
  #meterBar { transition: none !important; }
}

/* =========================
   GAME METER (Glow / Pulse)
   ========================= */

/* メーターパネル */
#meterWrap {
  margin: 14px 0 16px 0;
  padding: 14px 16px;
  border-radius: 18px;
  background: rgba(0, 0, 0, 0.35);
  border: 1px solid rgba(255, 255, 255, 0.18);
  min-height: 78px;

  /* 外周のうっすらネオン */
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.08) inset,
    0 0 18px rgba(255, 255, 255, 0.10);
}

/* テキスト行 */
#meterText {
  font-size: 15px;
  line-height: 1.55;
  opacity: 0.92;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}

/* バー外側 */
#meterBarOuter {
  height: 22px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.12);
  overflow: hidden;
  position: relative;
}

/* バーの「光の筋」レイヤ（走るハイライト） */
#meterBarOuter::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    110deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0.12) 35%,
    rgba(255,255,255,0.0) 60%
  );
  transform: translateX(-60%);
  opacity: 0;
}

/* 進捗フィル */
#meterFill {
  height: 100%;
  width: 0%;
  border-radius: 999px;
  transition: width 280ms ease;

  /* ネオン発光（デフォルト） */
  background: linear-gradient(90deg,
    rgba(255,255,255,0.45),
    rgba(255,255,255,0.90),
    rgba(255,255,255,0.55)
  );
  box-shadow:
    0 0 14px rgba(255, 255, 255, 0.35),
    0 0 28px rgba(255, 255, 255, 0.18);
}

/* 正解状態：明るめで発光強化 */
.meter--good #meterFill {
  background: linear-gradient(90deg,
    rgba(120,255,255,0.35),
    rgba(120,255,255,0.95),
    rgba(120,255,255,0.45)
  );
  box-shadow:
    0 0 14px rgba(120,255,255,0.55),
    0 0 34px rgba(120,255,255,0.25);
}

/* 不正解状態：赤系 */
.meter--bad #meterFill {
  background: linear-gradient(90deg,
    rgba(255,90,90,0.35),
    rgba(255,90,90,0.95),
    rgba(255,90,90,0.45)
  );
  box-shadow:
    0 0 14px rgba(255,90,90,0.55),
    0 0 34px rgba(255,90,90,0.25);
}

/* コンボ中：パネルが脈動＆バーに走る光 */
@keyframes neonPulse {
  0%   { box-shadow: 0 0 18px rgba(255,255,255,0.12), 0 0 0 1px rgba(255,255,255,0.08) inset; }
  50%  { box-shadow: 0 0 30px rgba(255,255,255,0.22), 0 0 0 1px rgba(255,255,255,0.12) inset; }
  100% { box-shadow: 0 0 18px rgba(255,255,255,0.12), 0 0 0 1px rgba(255,255,255,0.08) inset; }
}

@keyframes sweep {
  0%   { transform: translateX(-60%); opacity: 0; }
  20%  { opacity: 1; }
  100% { transform: translateX(60%); opacity: 0; }
}

.meter--combo #meterWrap {
  animation: neonPulse 1.0s ease-in-out infinite;
}

.meter--combo #meterBarOuter::after {
  animation: sweep 0.9s linear infinite;
  opacity: 1;
}

/* =========================
   Screen flash & shake
   ========================= */

#flash {
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  transition: opacity 120ms ease;
  mix-blend-mode: screen;
  z-index: 9999;
}

.flash--good { background: rgba(120,255,255,0.18); }
.flash--bad  { background: rgba(255,90,90,0.18); }

@keyframes shake {
  0% { transform: translate(0, 0); }
  20% { transform: translate(-6px, 2px); }
  40% { transform: translate(6px, -2px); }
  60% { transform: translate(-4px, -1px); }
  80% { transform: translate(4px, 1px); }
  100% { transform: translate(0, 0); }
}

.shake {
  animation: shake 180ms linear 1;
}
